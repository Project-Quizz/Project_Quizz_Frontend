@{
	ViewData["Title"] = "Frage erstellen";
}

@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success"
         role="alert"
         id="SuccessMessage"
         data-mdb-position="top-right"
         data-mdb-stacking="true"
         data-mdb-width="300px"
         data-mdb-append-to-body="true">
		 <i class="far fa-circle-check me-2"></i>
        @TempData["SuccessMessage"]
    </div>
}

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger"
         role="alert"
         id="ErrorMessage"
         data-mdb-position="top-right"
         data-mdb-stacking="true"
         data-mdb-width="300px"
         data-mdb-append-to-body="true">
		 <i class="fas fa-skull-crossbones me-2"></i>
        <p>@TempData["ErrorMessage"]<p>
    </div>
}

<div class="card text-center border border-primary shadow-0">
	<div class="card-header"><h2>Frage erstellen</h2></div>

	<div class="card-body card-body-menu mt-4 mb-4">
		<form asp-controller="MyArea" asp-action="CreateQuestionOnDB" method="post">

			<div class="form-group mb-4">
				<select class="form-control" id="CategorieId" name="Categorie.CategorieId" data-mdb-select-init required>
					<option value="">Kategorie auswählen</option>
					@foreach (var category in ViewBag.Categories)
					{
						<option value="@category.CategorieId">@category.Name</option>
					}
				</select>
				<label class="form-label select-label">Kategorie</label>
			</div>

			<div class="form-outline mb-4" data-mdb-input-init>
				<input type="text" class="form-control " id="QuestionText" name="questionText" value="@Model.QuestionText" required />
				<label class="form-label select-label" for="QuestionText">Fragentext</label>
			</div>

			<div class="row mb-4">
				@{
					int i = 0;
					foreach (var answer in Model.Answers)
					{
							<div class="col-md-6 form-group mb-4">
								<div class="form-outline mb-2" data-mdb-input-init>
									<input type="text" class="form-control" id="answerText_@i" name="answers[@i].answerText" value="@answer.AnswerText" required />
									<label class="form-label select-label" for="answerText_@i">Antwortmöglichkeit @(i + 1):</label>
								</div class="form-outline">

								<div class="form-check form-check-inline">
									<input class="form-check-input" type="radio" name="correctAnswer" id="correctAnswer_@i" value="@i" @(answer.IsCorrectAnswer ? "checked='checked'" : "") />
									<label class="form-check-label" for="correctAnswer_@i">
										Richtige Antwort
									</label>
								</div>
								<br>
							</div>
						i++;
					}
				}
			</div>
			<button type="submit" class="btn btn-success btn-menu" id="saveButton" >Speichern</button>
		</form>
	</div>
	<div class="card-footer d-flex justify-content-between align-items-center">
		<a type="button" class="btn btn-primary btn-menu-footer" asp-controller="MyArea" asp-action="MyAreaIndex" id="leftButton">Mein Bereich</a>
	    <a type="button" class="btn btn-primary btn-menu-footer" asp-controller="Home" asp-action="Index" id="leftButton">Zum Hauptmenü</a>
	</div>
</div>



@section scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            setTimeout(function () {
                var errorDiv = document.getElementById("ErrorMessage");
				var successDiv = document.getElementById("SuccessMessage")
                if (errorDiv) {
                    errorDiv.style.display = "none";
                }
				if (successDiv) {
					successDiv.style.display = "none";
				}
            }, 6000);
        });
    </script>
}
